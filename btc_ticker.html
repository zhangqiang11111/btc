<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BTC 实时价格</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #000;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      cursor: none;
    }
    #price {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      font-weight: 600;
      font-size: clamp(60px, 20vw, 300px);
      color: #fff;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      user-select: none;
    }
    #updated {
      position: fixed;
      bottom: 20px;
      right: 30px;
      font-size: 14px;
      color: #666;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <div id="price">--</div>
  <div id="updated"></div>

  <script>
    const priceEl = document.getElementById("price");
    const updatedEl = document.getElementById("updated");

    // 使用 Binance WebSocket 获取 BTC/USDT 实时价格
    const ws = new WebSocket("wss://stream.binance.com:9443/ws/btcusdt@trade");

    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      const price = parseFloat(data.p).toFixed(0); // 去掉小数点，显示整数价格
      priceEl.textContent = price;

      const now = new Date();
      updatedEl.textContent = "更新时间：" + now.toLocaleTimeString();
    };

    ws.onopen = () => {
      console.log("✅ 已连接 Binance 实时行情 WebSocket");
    };

    ws.onerror = (err) => {
      console.error("❌ WebSocket 错误:", err);
      priceEl.textContent = "数据错误";
    };

    ws.onclose = () => {
      console.warn("⚠️ WebSocket 已断开，5 秒后尝试重连...");
      setTimeout(() => location.reload(), 5000);
    };
  </script>
</body>
</html>
